# Gulp сборщик для фронтенда

## Основные возможности
1. Сборка stylus в css, включая автопрефиксер и минификацию.
2. Сборка и объединение javascript кода. Добавляет babel и минификацию.
3. Сборка png и svg спрайтов.

## Запуск
**gulp --dev --server** - запустит сборку в dev режиме, ключ **--server** так же запустит gulp-live-server. Все файлы будут собраны без минификации.

**gulp** - соберёт всё в продакшн режиме, наравне с остальными появятся минифицированные версии файлов.

## Таски
1. **build-css** - сборка stylus.
2. **build-js** - сборка и объединение js.
3. **build-sprites** - сборка спрайтов
4. **default** - сборка всего и запуск сервера, если присутствует ключи --dev и --server

## Структура 
### Stylus
Весь код должен лежать внутри каталога **css**. Включение файлов происходит средставми stylus, через директивы import и require.

Основные файлы, которые будут подключаться на страницы нужно положит в каталог **/css/build** отсюда их заберёт gulp и положит в **/assets/build**.

### Javascript
Весь код должен лежать внутри каталога js. Включение файлов происходит посредством пакета **gulp-js-import** директивой @import.

Основные файлы, которые будут подключаться на страницы нужно положит в каталог **/js/build** отсюда их заберёт gulp и положит в **/assets/build**.

### Спрайты
Все изображения спрайтов нужно положить в каталог **/assets/sprites/{sprite_name}**. 

Например, **/assets/sprites/global** сгенерирует следующие файлы:

1. Файлы стилей **/css/sprites/global.styl**, **/css/sprites/global-svg.styl**, **/css/sprites/global-svg.css**.
2. Файлы изображений **/assets/build/sprites/global.png**, **/assets/build/sprites/global.svg**.

В процессе сборки из svg спрайтов будут удалены свойства fill и stroke, чтобы их можно было перекрасить в любой цвет. 

Если svg спрайт отображается некорректно, проверьте не остались ли в нём лишние элементы, которые мешают корректному отображению.

Svg спрайты объединяются по методу symbols. Чтобы показать иконку на странице воспользуйтесь конструкцией: `<svg class="icon icon-sample"><use xlink:href="/assets/build/spritesglobal.svg#icon-sample" /></svg>`

Для каждого svg спрайта генерируется два файла стилей css и stylus, css содержит размеры иконки в em. А stylus содержит размеры в переменных, это нужно для управления размером иконки через font-size. Для простоты можно использовать mixin `sprite-font-size(14px, $svgicon-sample_width)`.

### Изображения
Все изображения должны лежать в каталоге **/assets/images**

### Сторонние библотеки
Сторонние библиотеки, которые должны подключаться в общие css и js файлы нужно положить в каталог **/vendor**, например, normalize.css.

Сторонние библотеки, которые будут подключаться напрямую в страницу, нужно положить в **/assets/vendor**, например, jquery.

## Адапитвная вёрстка
Для адаптивной вёрстки используется stylus пакет [rapture](https://jescalan.github.io/rupture/)

Не бойтесь добавлять адаптивные примеси ко всем классам отдельно. Сборщик объединит media queries, с помощью пакета gulp-group-css-media-queries и код будет таким же компактным, как если писать адаптивный код в отдельных файлах.